<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8">
  <title>TruckIS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="/media/css/bootstrap.css" rel="stylesheet">
  <link href="/media/css/bootstrap-responsive.css" rel="stylesheet">
  <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
    </style>
  <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.1.min.js"></script>
  <script src="/media/js/bootstrap.js"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      $('div.load').hide();
      $('div.unload').hide();

      $('.btn-load').click(function() {
        $(this).parents('div.trip').children('div.load').show();
		$(this).parents('div.trip').children('div.unload').hide();
      });

      $('.btn-unload').click(function() {
        $(this).parents('div.trip').children('div.unload').show();
		$(this).parents('div.trip').children('div.load').hide();
      });
	  
      $('.btn-cancel').click(function() {
        $(this).parents('div.trip').children('div.unload').hide();
        $(this).parents('div.trip').children('div.load').hide();
      });	  
    });

    
  </script>
 </head>
 <body>

  <div class="navbar navbar-fixed-top">
   <div class="navbar-inner">
    <div class="container">
     <a class="brand" href="#">Mach AD</a>
     <div class="nav-collapse">
      <ul class="nav">
       <li class="active"><a href="#">{{ driver_name }}</a></li>
       <li class="active"><a href="/logout/">Logout</a></li>
      </ul>
     </div><!--/.nav-collapse -->
    </div>
   </div>
  </div>
  
  <div class="container">

{% for customer, endCustomer, truck, fromPlace, toPlace, unit, loadedQuantity, unloadedQuantity, material, startDate,  deliveryNumber, loadingDriver, loadingDateTime, unloadingDriver, unloadingDateTime, note, id in tripList %}
    <div class="well trip" id="{{ id }}">
     <div class="row-fluid">
      <div class="span2">
       Datum: {{ startDate }}<br/>
       Odkud: {{ fromPlace }}<br/>
       Kam: {{ toPlace }}<br/>
	   Vůz: {{ truck }}<br/>
      </div>
      <div class="span2">
       Dodavatel: {{ customer }}<br/>
       Odběratel: {{ endCustomer }}<br/>
       Materiál: {{ material }}<br/>
       Dodací list: {% if deliveryNumber %}{{ deliveryNumber }}{% endif %}<br/>
      </div>
      <div class="span2">
       <button class="{% if loadingDateTime %}disabled{% else %}{% if loaded %}disabled{% else %}btn-load{% endif %} btn-info{% endif %} btn" href="#">{% if loadingDateTime %}Naloženo{% else %}Nakládka{% endif %}</button>
       <br/><br/>
       <button class="{% if not loadingDateTime%}disabled btn-info{% else %}btn-info btn-unload{% endif %} btn" href="#">Vykládka</button>
      </div>
	  
     </div>
     <div class="row-fluid">
      Poznamka: {{ note }}<br/>
      {% if loadingDateTime %}
	  Naloženo: {{ loadedQuantity }} {{ unit }}, {{ loadingDateTime|date:"d.m.y: H:i" }}, {{ loadingDriver }}<br/>
      {% endif %}	  
      {% if unloadingDateTime %}
	  Vyloženo: {{ unloadedQuantity }} {{ unit }}, {{ unloadingDateTime|date:"d.m.y: H:i" }}, {{ unloadingDriver }}</br>
      {% endif %}
     </div> 
	 
     <div class="well load">
      <form action="/trips/" method="post" class="form-horizontal">
      {% csrf_token %}	
       <h3>Nakládka</h3>
       <div class="control-group">
        <label class="control-label" for="date">Datum:</label>
        <div class="controls">
         <input type="text" class="input-xlarge" id="date" name="loadingDate" value="{{ today|date:"d.m.y" }}">
		 <span class="help-inline">dd.mm.rr</span>
        </div>
       </div>
       <div class="control-group">
        <label class="control-label" for="time">Čas:</label>
        <div class="controls">
         <input type="text" class="input-xlarge" id="time" name="loadingTime" value="{{ today|date:"H:i" }}">
		 <span class="help-inline">hh:mm</span>
        </div>
       </div>
       <div class="control-group">
        <label class="control-label" for="quantity">Množství:</label>
        <div class="controls">
         <input type="number" class="input-xlarge required" id="quantity" name="loadedQuantity">
		 <span class="help-inline">{{ unit }}</span>
        </div>
       </div>
       <div class="control-group">
        <label class="control-label" for="ordernumber">Dodací list:</label>
        <div class="controls">
         <input type="number" class="input-xlarge" id="ordernumber" name="deliveryNumber">
        </div>
       </div>
       <div class="control-group">
        <label class="control-label" for="pin">PIN:</label>
        <div class="controls">
         <input type="text" class="input-xlarge" id="pin" name="pin">
        </div>
       </div>
       <div class="control-group">
        <label class="control-label" for="password">Heslo:</label>
        <div class="controls">
         <input type="password" class="input-xlarge" id="password" name="password">
        </div>
       </div>
       <div class="form-actions">
        <button type="submit" class="btn btn-large" name="load_button" value="{{ id }}">Odeslat</button>
		<button type="reset" class="btn btn-large btn-cancel">Zrušit</button>
       </div>     
      </form>
     </div>

     <div class="well unload">
      <form action="/trips/" method="post" class="form-horizontal">
      {% csrf_token %}
       <h3>Vykládka</h3>
       <div class="control-group">
        <label class="control-label" for="date">Datum:</label>
        <div class="controls">
         <input type="text" class="input-xlarge" id="date" name="unloadingDate" value="{{ today|date:"d.m.y" }}">
		 <span class="help-inline">dd.mm.rr</span>
        </div>
       </div>
       <div class="control-group">
        <label class="control-label" for="time">Čas:</label>
        <div class="controls">
         <input type="text" class="input-xlarge" id="time" name="unloadingTime" value="{{ today|date:"H:i" }}">
		 <span class="help-inline">hh:mm</span>
        </div>
       </div>
       <div class="control-group">
        <label class="control-label" for="quantity">Množství:</label>
        <div class="controls">
         <input type="text" readonly="yes" class="input-xlarge" id="quantity" name="unloadedQuantity" value="{{ loadedQuantity }}">
		 <span class="help-inline">{{ unit }}</span>
        </div>
       </div>
       <div class="control-group">
        <label class="control-label" for="ordernumber">Dodací list:</label>
        <div class="controls">
         <input type="text" readonly="yes" class="input-xlarge" id="ordernumber" value="{{ deliveryNumber }}">
        </div>
       </div>
       <div class="control-group">
        <label class="control-label" for="pin">PIN:</label>
        <div class="controls">
         <input type="text" class="input-xlarge" id="pin" name="pin">
        </div>
       </div>
       <div class="control-group">
        <label class="control-label" for="password">Heslo:</label>
        <div class="controls">
         <input type="password" class="input-xlarge" id="password" name="password">
        </div>
       </div>
       <div class="form-actions">
        <button type="submit" class="btn btn-large" name="unload_button" value="{{ id }}">Odeslat</button>
		<button type="reset" class="btn btn-large btn-cancel">Zrušit</button>
       </div>     
      </form>
     </div>

    </div>

   <hr>
{% endfor %}

{% for customer, endCustomer, truck, fromPlace, toPlace, unit, loadedQuantity, unloadedQuantity, material, startDate,  deliveryNumber, loadingDriver, loadingDateTime, unloadingDriver, unloadingDateTime, note, id in finishedTripList %}
    <div class="well trip" id="{{ id }}">
     <div class="row-fluid">
      <div class="span2">
       Datum: {{ startDate }}<br/>
       Odkud: {{ fromPlace }}<br/>
       Kam: {{ toPlace }}<br/>
	   Vůz: {{ truck }}<br/>
      </div>
      <div class="span2">
       Dodavatel: {{ customer }}<br/>
       Odběratel: {{ endCustomer }}<br/>
       Materiál: {{ material }}<br/>
       Dodací list: {{ deliveryNumber }}<br/>
      </div>
      <div class="span2">
       <button class="disabled btn" href="#">Naloženo</button>
       <br/><br/>
       <button class="disabled btn" href="#">Vyloženo</button>
      </div>
	  
     </div>
     <div class="row-fluid">
      Poznamka: {{ note }}<br/>
      Naloženo: {{ loadedQuantity }} {{ unit }}, {{ loadingDateTime|date:"d.m.y: H:i" }}, {{ loadingDriver }}<br/>
      Vyloženo: {{ unloadedQuantity }} {{ unit }}, {{ unloadingDateTime|date:"d.m.y: H:i" }}, {{ unloadingDriver }}</br>
     </div> 
    </div>

   <hr>
{% endfor %}

   <footer>
    <p>&copy; Mach AD 2012</p>
   </footer>

  </div>
 </body>
</html>
